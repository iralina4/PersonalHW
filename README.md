# EGE Math Tutor

Система персонализированной генерации домашних заданий по математике для подготовки к ЕГЭ.

## Описание

Веб-сервис автоматически подбирает задачи из базы на основе профиля ученика (слабые/сильные темы, целевой балл) и генерирует PDF с заданиями. Использует RAG для семантического поиска и YaGPT для создания персонализированных вариантов.

## Технологии

**Backend:**
- FastAPI - REST API
- PostgreSQL - основная БД
- SQLAlchemy + Alembic - ORM и миграции
- Celery + Redis - фоновые задачи

**RAG система:**
- Qdrant - векторная база данных
- Meilisearch - полнотекстовый поиск
- sentence-transformers - эмбеддинги
- Гибридный поиск (векторы + BM25)

**AI интеграция:**
- YandexGPT - генерация новых задач
- Персонализация под профиль ученика

**Frontend:**
- HTML + Tailwind CSS - веб-интерфейс
- JavaScript - API взаимодействие

**PDF генерация:**
- ReportLab - создание документов
- Отдельный микросервис

**Инфраструктура:**
- Docker Compose - оркестрация
- Nginx - прокси

## Запуск

```bash
# Настройка окружения
cp env_sample .env
# Отредактируйте .env файл

# Запуск всех сервисов
docker compose build
docker compose up -d
```

**Доступ:**
- Веб-интерфейс: http://localhost:3001
- API: http://localhost:8000
- API документация: http://localhost:8000/docs

## Использование

1. **Создание ученика** - укажите имя, класс, целевой балл, слабые темы
2. **Импорт задач** - добавьте задачи в базу через веб-форму или API
3. **Генерация ДЗ** - укажите темы в формате "Алгебра — 3, Геометрия — 2"
4. **Скачивание PDF** - получите файлы для ученика и учителя

## API

- `POST /api/students/` - создание ученика
- `POST /api/students/{id}/profile` - создание профиля
- `POST /api/assignments/generate` - генерация задания
- `POST /api/tasks/import` - импорт задач
- `GET /api/assignments/{id}/download/{type}` - скачивание PDF

## Структура проекта

```
├── server/          # FastAPI backend
├── frontend/        # Веб-интерфейс
├── pdf-service/     # PDF генерация
├── data/           # Задачи для импорта
├── docker-compose.yml
└── env_sample
```